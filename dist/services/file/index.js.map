{"version":3,"sources":["../../../src/services/file/index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQM,WAAW;cAAX,WAAW;;aAAX,WAAW;8BAAX,WAAW;;sEAAX,WAAW;;;iBAAX,WAAW;;gCACL,GAAG,EAAE;AACT,mBAAO,iBAAO,SAAS,CAAC,OAAO,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,CAAC;SAC9C;;;;;;;;;;;;;;;;;iCAmBQ,IAAI,EAAE;AACX,gBAAI,IAAI,GAAG,oBAAU,CAAC;AACtB,gBAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE;;;;;;;;;AAAC,AAS3B,mBAAO,IAAI,iBAAO,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CACnC,IAAI,CAAC,UAAC,SAAS,EAAK;AACjB,uBAAO,SAAS,CAAC;aACpB,CAAC,CAAC;SACV;;;WArCC,WAAW;;;;;AAyCjB,IAAI,QAAQ,GAAG,IAAI,WAAW,EAAE,CAAC;QACxB,WAAW,GAAX,WAAW;QACC,WAAW,GAAvB,QAAQ;kBACF,QAAQ","file":"index.js","sourcesContent":["import BaseService from '../BaseService';\nimport models from '../../models';\nimport errors from '../../utils/error';\nimport mongoose from 'mongoose';\nimport conf from '../../conf';\nimport crypto from 'crypto';\nimport Puid from 'puid';\n\nclass FileService extends BaseService {\n    getFile(pid) {\n        return models.FileModel.findOne({pid:pid});\n    }\n\n    /*\n     getFile(pid, infos) {\n\n     //Check infos\n\n     //var arrayPart = [];\n     //get all part files\n     //for each\n     //DECRYPT AES\n     //Save in arrayPart\n\n     //join all part files\n\n     //Return\n     }\n     */\n\n    saveFile(file) {\n        var puid = new Puid();\n        file.pid = puid.generate();\n\n        //Check MD5\n\n        //Split file\n        //for each\n        //CRYPT AES\n        //Save Part document in database\n\n        return new models.FileModel(file).save()\n            .then((savedFile) => {\n                return savedFile;\n            });\n    }\n}\n\n//singleton\nvar instance = new FileService();\nexport { FileService };\nexport { instance as FileService };\nexport default instance;\n"]}